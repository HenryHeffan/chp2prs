defproc loop2 () {
  int<1> x;
  int<1> y;
  int<1> z;
  int<1> w;
  int<4> sel0;
  
  chp {
    [ y=0 -> sel0:=1 ]; [ x=1 -> ( *[ y=1 -> z:=1; [ z=1 -> w:=1 ] ] ) [] else -> skip ]
  }
}

loop2 loop;
/*     *[ y=0 -> y:=1 [] else -> x:=y; y:=0 ]  */
/*     [ y=0 -> sel0:=1 ]; [ sel0=1 -> ( *[ sel0=1 -> y:=1; [ y=0 -> sel0:=1 ] ] ) [] else -> skip ] */
